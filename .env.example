# KIRIMBA Banking System - Environment Configuration

# ============================================
# APPLICATION
# ============================================
NODE_ENV=development
PORT=3000
API_VERSION=v1

# ============================================
# DATABASE
# ============================================
DATABASE_URL="postgresql://kirimba_user:secure_password@localhost:5432/kirimba_banking?schema=public"

# ============================================
# AUTHENTICATION
# ============================================
JWT_SECRET=your-super-secret-jwt-key-change-in-production
JWT_EXPIRES_IN=7d
REFRESH_TOKEN_SECRET=your-refresh-token-secret
REFRESH_TOKEN_EXPIRES_IN=30d

# Bcrypt rounds
BCRYPT_ROUNDS=10

# ============================================
# REDIS (Caching & Sessions)
# ============================================
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=0

# ============================================
# MOBILE MONEY INTEGRATION
# ============================================

# Lumicash API
LUMICASH_API_URL=https://api.lumicash.bi/v1
LUMICASH_API_KEY=your-lumicash-api-key
LUMICASH_API_SECRET=your-lumicash-api-secret
LUMICASH_MERCHANT_ID=your-merchant-id

# EcoCash API
ECOCASH_API_URL=https://api.ecocash.bi/v1
ECOCASH_API_KEY=your-ecocash-api-key
ECOCASH_API_SECRET=your-ecocash-api-secret
ECOCASH_MERCHANT_ID=your-merchant-id

# ============================================
# PARTNER INSTITUTION (Umuco Microfinance)
# ============================================
PARTNER_API_URL=https://api.umuco.bi/v1
PARTNER_API_KEY=your-partner-api-key
PARTNER_API_SECRET=your-partner-api-secret
PARTNER_INSTITUTION_ID=UMUCO

# KIRIMBA Accounts at Partner Institution
KIRIMBA_LENDING_POOL_ACCOUNT=123456789
KIRIMBA_REPAYMENT_ACCOUNT=987654321

# ============================================
# SMS GATEWAY
# ============================================
SMS_PROVIDER=twilio # Options: twilio, africas_talking, custom

# Twilio
TWILIO_ACCOUNT_SID=your-twilio-account-sid
TWILIO_AUTH_TOKEN=your-twilio-auth-token
TWILIO_PHONE_NUMBER=+257xxxxxxxxx

# Africa's Talking (Alternative)
AT_API_KEY=your-africas-talking-api-key
AT_USERNAME=your-africas-talking-username

# ============================================
# USSD GATEWAY
# ============================================
USSD_GATEWAY_URL=https://ussd.gateway.bi/v1
USSD_GATEWAY_API_KEY=your-ussd-gateway-key
USSD_SHORT_CODE=*384# # Example short code

# ============================================
# WHATSAPP BUSINESS API
# ============================================
WHATSAPP_ENABLED=false
WHATSAPP_BUSINESS_ACCOUNT_ID=your-whatsapp-business-id
WHATSAPP_ACCESS_TOKEN=your-whatsapp-access-token
WHATSAPP_PHONE_NUMBER_ID=your-phone-number-id
WHATSAPP_VERIFY_TOKEN=your-webhook-verify-token

# ============================================
# AI/ML CREDIT SCORING
# ============================================
AI_MODEL_ENABLED=true
AI_MODEL_ENDPOINT=http://localhost:5000/predict # Local ML service
AI_MODEL_API_KEY=your-ml-service-api-key

# Auto-approve threshold (risk score 0-1, lower is better)
AUTO_APPROVE_THRESHOLD=0.30
HIGH_RISK_THRESHOLD=0.50

# ============================================
# INTEREST RATES & FEES
# ============================================

# Tier 1: 0-100,000 BIF
INTEREST_TIER_1_MIN=0
INTEREST_TIER_1_MAX=100000
INTEREST_TIER_1_RATE=4.00

# Tier 2: 100,001-500,000 BIF
INTEREST_TIER_2_MIN=100001
INTEREST_TIER_2_MAX=500000
INTEREST_TIER_2_RATE=5.00

# Tier 3: 500,001+ BIF
INTEREST_TIER_3_MIN=500001
INTEREST_TIER_3_RATE=6.00

# Loan interest rates (per cycle)
LOAN_RATE_48_HOURS=8.00
LOAN_RATE_7_DAYS=6.00
LOAN_RATE_14_DAYS=5.00
LOAN_RATE_30_DAYS=4.00

# Platform fee (percentage of loan amount)
PLATFORM_FEE_PERCENTAGE=1.00

# Late fee
LATE_FEE_AMOUNT=2500 # BIF

# ============================================
# LOAN LIMITS
# ============================================
# Credit limit multipliers based on tenure
CREDIT_MULTIPLIER_0_3_MONTHS=1.5
CREDIT_MULTIPLIER_4_6_MONTHS=2.0
CREDIT_MULTIPLIER_7_12_MONTHS=2.5
CREDIT_MULTIPLIER_12_PLUS_MONTHS=3.0

# Group loan threshold (% of total group savings)
GROUP_LOAN_THRESHOLD_PERCENT=33

# ============================================
# GRACE PERIODS & DEFAULTS
# ============================================
GRACE_PERIOD_HOURS=48
OVERDUE_DAY_3_ACTION=personal_outreach
OVERDUE_DAY_7_ACTION=collateral_deduction

# ============================================
# NOTIFICATIONS
# ============================================
NOTIFICATIONS_ENABLED=true
NOTIFICATION_CHANNELS=sms,push,whatsapp

# Reminder schedule (days before due date)
REMINDER_T_MINUS_3=true
REMINDER_T_MINUS_1=true
REMINDER_DUE_DATE=true

# ============================================
# INSURANCE (FDIC-equivalent)
# ============================================
INSURANCE_COVERAGE_MAX=2000000 # 2M BIF
INSURANCE_PROVIDER=Burundi_Deposit_Insurance

# ============================================
# GAMIFICATION
# ============================================
GAMIFICATION_ENABLED=true
LEADERBOARD_REFRESH_CRON=0 0 1 * * # Daily at 1 AM

# Milestone bonuses
MILESTONE_100K_BONUS=5000
MILESTONE_500K_BONUS=25000

# ============================================
# FINANCIAL LITERACY
# ============================================
LITERACY_COMPLETION_BONUS=10000 # BIF
LITERACY_PASSING_SCORE=80

# ============================================
# LOGGING
# ============================================
LOG_LEVEL=info # Options: error, warn, info, debug
LOG_FILE_PATH=logs/kirimba.log

# ============================================
# RATE LIMITING
# ============================================
RATE_LIMIT_WINDOW_MS=900000 # 15 minutes
RATE_LIMIT_MAX_REQUESTS=100

# ============================================
# SECURITY
# ============================================
CORS_ORIGIN=http://localhost:3000,http://localhost:3001
ENABLE_CSRF_PROTECTION=true

# PIN/Password retry limits
MAX_PIN_ATTEMPTS=3
PIN_LOCKOUT_DURATION_MINUTES=30

# ============================================
# FILE UPLOADS (KYC Documents)
# ============================================
UPLOAD_MAX_SIZE_MB=5
UPLOAD_ALLOWED_TYPES=image/jpeg,image/png,image/jpg,application/pdf
UPLOAD_STORAGE_PATH=uploads/kyc

# ============================================
# PARTNER INSTITUTION CONFIG
# ============================================
# Account activation SLA (hours)
ACCOUNT_ACTIVATION_SLA_HOURS=24

# Disbursement SLA (minutes)
DISBURSEMENT_SLA_MINUTES=30

# ============================================
# SYSTEM HEALTH
# ============================================
HEALTH_CHECK_ENABLED=true
METRICS_ENABLED=true

# ============================================
# BACKUP & DISASTER RECOVERY
# ============================================
BACKUP_ENABLED=true
BACKUP_SCHEDULE_CRON=0 0 2 * * # Daily at 2 AM
BACKUP_RETENTION_DAYS=30

# ============================================
# DEVELOPMENT / TESTING
# ============================================
MOCK_MOBILE_MONEY=false
MOCK_PARTNER_INSTITUTION=false
MOCK_SMS=false
SEED_DATABASE=false
